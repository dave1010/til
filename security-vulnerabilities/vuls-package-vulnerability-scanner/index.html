<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="/assets/css/styles.css">
  </head>
  <body>
    <header>
        <h1><a href="/">Dave Hulbert's Today I Learned (TIL)</a></h1>
    </header>

    <main>
        <hr>
        <section>
            <h1>Setting Up Vuls for Package Vulnerability Scanning on Linux Servers</h1>
<p>When managing Linux servers, it's crucial to ensure they're free from vulnerabilities. I recently explored various package vulnerability scanners and stumbled upon Vuls, an open-source tool that impressed me with its power and simplicity. Here’s a rundown of how to set it up and what makes it stand out.</p>
<h2>What is Vuls?</h2>
<p><a href="https://vuls.io/">Vuls</a> is a powerful vulnerability scanner designed for Linux systems. It simplifies the process of identifying security vulnerabilities by automating the scanning and reporting processes. You can run it directly on the host you're scanning or remotely, making it usable for a quick one off scan or scheduled in production.</p>
<h2>How Vuls Works</h2>
<p>The tool operates by collecting a list of installed packages (eg the same way you use the <code>dpkg -l</code> command) and then comparing this list against a database of Common Vulnerabilities and Exposures (CVE). This comparison helps identify potential security threats present in the installed packages.</p>
<h2>Installation Process</h2>
<p>Getting Vuls up and running involves a few straightforward steps:</p>
<ol>
<li>
<p><strong>Initial Installation</strong>:
Download and run the installation script:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">wget</span> https://raw.githubusercontent.com/vulsio/vulsctl/master/install-host/install.sh
<span class="token function">sudo</span> <span class="token function">bash</span> install.sh</code></pre>
</li>
<li>
<p><strong>Clone the Repository</strong>:
Clone the Vuls repository to your system:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/vulsio/vulsctl.git</code></pre>
</li>
</ol>
<h2>Updating CVE Databases</h2>
<p>Updating the CVE databases is a critical step, though it can be time-consuming. Here’s how to do it:</p>
<ol>
<li>
<p><strong>Prepare the Update Script</strong>:
Customize the update script to avoid downloading unnecessary files for other operating systems:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">cp</span> vulsctl/install-host/update-all<span class="token punctuation">{</span>,-custom-ubuntu<span class="token punctuation">}</span>.sh
<span class="token function">nano</span> vulsctl/install-host/update-all-custom-ubuntu.sh
<span class="token comment"># Comment out the lines for operating systems you don't need</span></code></pre>
</li>
<li>
<p><strong>Run the Update</strong>:
Execute the update script and allow some time for it to complete:</p>
<pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">cd</span> vulsctl/install-host
<span class="token function">time</span> <span class="token function">sudo</span> <span class="token function">bash</span> update-all-custom-ubuntu.sh
<span class="token comment"># real	77m29.339s</span>
<span class="token comment"># user	31m17.511s</span>
<span class="token comment"># sys	6m23.535s</span></code></pre>
</li>
</ol>
<h2>Configuration for Scanning</h2>
<p>To scan the localhost, ensure your configuration file is set up correctly:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">cat</span> config.toml
<span class="token punctuation">[</span>servers<span class="token punctuation">]</span>

<span class="token punctuation">[</span>servers.localhost<span class="token punctuation">]</span>
<span class="token function">host</span>               <span class="token operator">=</span> <span class="token string">"127.0.0.1"</span>
port               <span class="token operator">=</span> <span class="token string">"local"</span>
scanMode           <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"fast"</span><span class="token punctuation">]</span></code></pre>
<h2>Running the Scan</h2>
<p>Once everything is set up, running a scan is as simple as executing:</p>
<pre class="language-bash"><code class="language-bash">vuls scan
vuls report</code></pre>
<p>This command will start the scanning process and then provide a report detailing any found vulnerabilities, including whether a patch is available.</p>

        </section>

        <hr>

        <footer>
            <p>
                &copy; Dave Hulbert<br><a href="/">Home</a>
                    |
                    <a href="https://github.com/dave1010/til/blob/main/./security-vulnerabilities/vuls-package-vulnerability-scanner.md" target="_blank">Edit this page on GitHub</a></p>
        </footer>
    </main>
  </body>
</html>
